<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Price List – Haji Wadud CNG &amp; Pick-up Parts</title>
    <meta name="description" content="Complete wholesale and retail price list for CNG and pick-up vehicle parts. Search, filter, and export.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">

    <style>
        /* ── Loading Skeleton ─────────────────────────────────── */
        .loader-wrap {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 16px;
            padding: 80px 20px;
            color: var(--txt-muted);
        }

        .spinner {
            width: 44px;
            height: 44px;
            border: 4px solid var(--border);
            border-top-color: var(--clr-primary);
            border-radius: 50%;
            animation: spin 0.75s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loader-wrap p {
            font-size: 0.95rem;
            font-weight: 500;
            color: var(--txt-muted);
        }

        /* ── Error State ──────────────────────────────────────── */
        .error-state {
            text-align: center;
            padding: 64px 20px;
        }

        .error-state svg {
            width: 56px;
            height: 56px;
            color: #ef4444;
            margin-inline: auto;
            margin-bottom: 16px;
        }

        .error-state h3 {
            font-size: 1.3rem;
            color: var(--txt-heading);
            margin-bottom: 8px;
        }

        .error-state p {
            font-size: 0.9rem;
            color: var(--txt-muted);
            margin-bottom: 20px;
            max-width: 480px;
            margin-inline: auto;
        }

        .error-state .btn {
            margin-inline: auto;
        }

        /* ── Table overrides ──────────────────────────────────── */
        .table-wrap {
            overflow-x: auto;
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 520px;
        }

        .data-table thead {
            background: linear-gradient(135deg, var(--clr-primary) 0%, var(--clr-primary-dark) 100%);
        }

        .data-table th {
            padding: 18px 16px;
            text-align: left;
            font-family: var(--font-display);
            font-size: 0.82rem;
            font-weight: 700;
            letter-spacing: 0.6px;
            text-transform: uppercase;
            color: #fff;
            white-space: nowrap;
        }

        .data-table th:first-child { width: 72px; }

        .data-table tbody tr {
            border-bottom: 1px solid var(--border);
            transition: background var(--ease-fast);
        }

        .data-table tbody tr:last-child { border-bottom: none; }

        .data-table tbody tr:hover { background: var(--bg-muted); }

        /* Zebra stripe */
        .data-table tbody tr:nth-child(even) {
            background: color-mix(in srgb, var(--bg-muted) 50%, transparent);
        }
        .data-table tbody tr:nth-child(even):hover { background: var(--bg-muted); }

        .data-table td {
            padding: 15px 16px;
            font-size: 0.93rem;
            color: var(--txt-body);
        }

        /* Serial col */
        .data-table td:nth-child(1) {
            font-weight: 700;
            color: var(--txt-muted);
            font-size: 0.85rem;
        }

        /* Name col */
        .data-table td:nth-child(2) {
            font-weight: 600;
            color: var(--txt-heading);
        }

        /* Price cols */
        .data-table td:nth-child(3),
        .data-table td:nth-child(4) {
            font-weight: 700;
            color: var(--clr-primary);
            font-size: 1rem;
            white-space: nowrap;
        }

        .data-table td:nth-child(4) {
            color: #059669;   /* green for retail */
        }

        /* ── Stats Row ────────────────────────────────────────── */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            padding-block: 28px;
        }

        @media (min-width: 640px) {
            .stats-row { grid-template-columns: repeat(4, 1fr); }
        }

        /* ── Badge inside table ───────────────────────────────── */
        .cat-badge {
            display: inline-block;
            font-size: 0.7rem;
            font-weight: 700;
            padding: 2px 8px;
            border-radius: 999px;
            text-transform: uppercase;
            letter-spacing: 0.4px;
            margin-left: 6px;
            vertical-align: middle;
            background: color-mix(in srgb, var(--clr-primary) 12%, transparent);
            color: var(--clr-primary);
        }

        /* ── Highlight search matches ─────────────────────────── */
        mark {
            background: color-mix(in srgb, var(--clr-accent) 40%, transparent);
            color: inherit;
            border-radius: 3px;
            padding: 0 2px;
        }

        /* ── Refresh indicator ────────────────────────────────── */
        .last-updated {
            font-size: 0.78rem;
            color: var(--txt-muted);
            text-align: right;
            margin-top: 12px;
        }

        .last-updated span {
            font-weight: 600;
            color: var(--clr-primary);
        }

        /* ── Pagination ───────────────────────────────────────── */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 6px;
            margin-top: 36px;
            flex-wrap: wrap;
        }

        .page-btn {
            min-width: 42px;
            height: 42px;
            padding: 0 14px;
            border: 2px solid var(--border);
            background: var(--bg-card);
            color: var(--txt-body);
            border-radius: var(--radius-sm);
            font-family: var(--font-body);
            font-size: 0.88rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--ease-fast);
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .page-btn:hover:not(.active):not(:disabled) {
            background: var(--bg-muted);
            border-color: var(--clr-primary);
            color: var(--clr-primary);
        }

        .page-btn.active {
            background: var(--clr-primary);
            color: #fff;
            border-color: var(--clr-primary);
        }

        .page-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .page-ellipsis {
            padding: 0 6px;
            color: var(--txt-muted);
            line-height: 42px;
        }

        @media (max-width: 480px) {
            .page-btn {
                min-width: 36px;
                height: 36px;
                font-size: 0.82rem;
                padding: 0 10px;
            }
        }
    </style>
</head>
<body>

    <!-- ===== NAVBAR ===== -->
    <nav class="navbar" id="navbar">
        <div class="nav-inner">
            <a href="index.html" class="logo" aria-label="Haji Wadud Parts – Home">
                <span class="logo-primary">Haji Wadud</span>
                <span class="logo-secondary">CNG &amp; Pick-up Parts</span>
            </a>

            <ul class="nav-menu" id="navMenu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="products.html" class="nav-link">Products</a></li>
                <li><a href="price-list.html" class="nav-link active">Price List</a></li>
                <li><a href="about.html" class="nav-link">About Us</a></li>
                <li><a href="contact.html" class="nav-link">Contact</a></li>
            </ul>

            <div class="nav-controls">
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode" title="Toggle dark mode">
                    <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true">
                        <circle cx="12" cy="12" r="5"/>
                        <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                    </svg>
                    <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                </button>
                <button class="hamburger" id="hamburger" aria-label="Open menu" aria-expanded="false" aria-controls="navMenu">
                    <span></span><span></span><span></span>
                </button>
            </div>
        </div>
    </nav>

    <!-- ===== PAGE HEADER ===== -->
    <header class="page-header">
        <div class="container">
            <h1>Complete Price List</h1>
            <p>মূল্য তালিকা – Wholesale &amp; Retail Prices</p>
        </div>
    </header>

    <!-- ===== CONTROLS BAR ===== -->
    <div class="controls-bar" role="search" aria-label="Filter price list">
        <div class="container">
            <div class="controls-inner">

                <div class="search-wrapper" style="flex:1; min-width:220px; position:relative;">
                    <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                         stroke-linecap="round" aria-hidden="true"
                         style="position:absolute;left:14px;top:50%;transform:translateY(-50%);width:18px;height:18px;color:var(--txt-muted);pointer-events:none;">
                        <circle cx="11" cy="11" r="8"/>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                    </svg>
                    <input
                        type="search"
                        id="searchInput"
                        class="form-input"
                        placeholder="Search by name or serial… (Ctrl+K)"
                        aria-label="Search price list"
                        autocomplete="off"
                        style="padding-left:42px;"
                    >
                </div>

                <select id="categoryFilter" class="form-select" aria-label="Filter by category" style="min-width:180px;">
                    <option value="all">All Categories</option>
                    <option value="175">175 Series</option>
                    <option value="205">205 Series</option>
                    <option value="225">225 Series</option>
                    <option value="bearings">Bearings</option>
                    <option value="tires">Tires &amp; Tubes</option>
                    <option value="oils">Oils &amp; Lubricants</option>
                    <option value="electrical">Electrical</option>
                    <option value="other">Other Parts</option>
                </select>

                <button class="btn btn-primary" id="exportBtn" aria-label="Export current view to CSV">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    Export CSV
                </button>

                <button class="btn btn-secondary" id="refreshBtn" aria-label="Reload data from Google Sheets" title="Reload from Google Sheets">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true">
                        <polyline points="1 4 1 10 7 10"/>
                        <path d="M3.51 15a9 9 0 1 0 .49-3.15"/>
                    </svg>
                    Refresh
                </button>

            </div>
        </div>
    </div>

    <!-- ===== STATISTICS ===== -->
    <div class="bg-muted" style="border-bottom:1px solid var(--border);">
        <div class="container">
            <div class="stats-row">
                <div class="stat-box">
                    <div class="stat-box-label">Total Products</div>
                    <div class="stat-box-value" id="statTotal">–</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-label">With Prices</div>
                    <div class="stat-box-value" id="statPriced">–</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-label">Categories</div>
                    <div class="stat-box-value">8</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-label">Displayed</div>
                    <div class="stat-box-value" id="statDisplayed">–</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== MAIN TABLE AREA ===== -->
    <main class="section bg-base">
        <div class="container">

            <!-- Loading state (shown on first load) -->
            <div class="loader-wrap" id="loaderState">
                <div class="spinner" role="status" aria-label="Loading price list"></div>
                <p>Fetching latest prices from Google Sheets…</p>
            </div>

            <!-- Error state (shown on fetch failure) -->
            <div class="error-state" id="errorState" style="display:none;" role="alert">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="8" x2="12" y2="12"/>
                    <line x1="12" y1="16" x2="12.01" y2="16"/>
                </svg>
                <h3>Could Not Load Price List</h3>
                <p id="errorMsg">Unable to fetch data from Google Sheets. Please ensure the sheet is published and the URL is correctly configured.</p>
                <button class="btn btn-primary" onclick="loadData(true)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true">
                        <polyline points="1 4 1 10 7 10"/>
                        <path d="M3.51 15a9 9 0 1 0 .49-3.15"/>
                    </svg>
                    Try Again
                </button>
            </div>

            <!-- Data area (shown after successful load) -->
            <div id="dataArea" style="display:none;">

                <div class="table-wrap" id="tableWrap">
                    <table class="data-table" aria-label="Product price list">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Product Name</th>
                                <th scope="col">Wholesale (৳)</th>
                                <th scope="col">Retail (৳)</th>
                            </tr>
                        </thead>
                        <tbody id="priceTableBody">
                        </tbody>
                    </table>
                </div>

                <!-- Empty / no-match state -->
                <div class="empty-state" id="noResults" style="display:none;" role="status">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
                        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    <h3>No Products Found</h3>
                    <p>Try adjusting your search or filter criteria.</p>
                </div>

                <!-- Pagination -->
                <nav class="pagination" id="pagination" aria-label="Price list pagination"></nav>

                <!-- Last updated timestamp -->
                <p class="last-updated" id="lastUpdated"></p>

            </div>

        </div>
    </main>

    <!-- ===== FOOTER ===== -->
    <footer class="footer">
        <div class="container footer-grid">
            <div class="footer-col footer-brand-col">
                <a href="index.html" class="logo footer-logo" aria-label="Haji Wadud Parts – Home">
                    <span class="logo-primary">Haji Wadud</span>
                    <span class="logo-secondary">CNG &amp; Pick-up Parts</span>
                </a>
                <p class="footer-tagline">Your trusted partner for genuine CNG and pick-up auto parts in Bangladesh since 2000.</p>
            </div>

            <div class="footer-col">
                <h4>Quick Links</h4>
                <ul class="footer-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><a href="price-list.html">Price List</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h4>Contact Info</h4>
                <ul class="footer-contact-list">
                    <li>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true"><path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z"/><circle cx="12" cy="10" r="3"/></svg>
                        <span>Comilla, Chittagong, Bangladesh</span>
                    </li>
                    <li>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07A19.5 19.5 0 0 1 4.69 12a19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 3.6 1.1h3a2 2 0 0 1 2 1.72c.13.96.36 1.9.71 2.81a2 2 0 0 1-.45 2.11L7.91 8.7A16 16 0 0 0 15.3 16l.95-.95a2 2 0 0 1 2.11-.45c.9.35 1.85.58 2.81.71A2 2 0 0 1 22 16.92z"/></svg>
                        <span>+880 1XXX-XXXXXX</span>
                    </li>
                    <li>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                        <span>info@hajiwadudparts.com</span>
                    </li>
                </ul>
            </div>

            <div class="footer-col">
                <h4>Business Hours</h4>
                <ul class="footer-hours">
                    <li>
                        <span>Saturday – Thursday</span>
                        <strong>9:00 AM – 8:00 PM</strong>
                    </li>
                    <li>
                        <span>Friday</span>
                        <strong class="closed-label">Closed</strong>
                    </li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <div class="container footer-bottom-inner">
                <p>&copy; 2026 Haji Wadud CNG &amp; Pick-up Parts. All rights reserved.</p>
                <p>Built with excellence for quality service.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="price-list.js"></script>
</body>
</html>
